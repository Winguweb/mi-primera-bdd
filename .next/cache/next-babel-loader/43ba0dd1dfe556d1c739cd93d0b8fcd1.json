{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport Router from \"next/router\";\nimport { getUserFromServerCookie, getUserFromLocalCookie } from \"../lib/auth\";\nexport default (function (Page) {\n  var _temp;\n\n  return _temp = /*#__PURE__*/function (_Component) {\n    _inherits(DefaultPage, _Component);\n\n    function DefaultPage() {\n      var _getPrototypeOf2;\n\n      var _this;\n\n      _classCallCheck(this, DefaultPage);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DefaultPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n      _defineProperty(_assertThisInitialized(_this), \"logout\", function (eve) {\n        if (eve.key === \"logout\") {\n          Router.push(\"/?logout=\".concat(eve.newValue));\n        }\n      });\n\n      return _this;\n    }\n\n    _createClass(DefaultPage, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        window.addEventListener(\"storage\", this.logout, false);\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        window.removeEventListener(\"storage\", this.logout, false);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return __jsx(Page, this.props);\n      }\n    }], [{\n      key: \"getInitialProps\",\n      value: function getInitialProps(_ref) {\n        var req, loggedUser, pageProps, path;\n        return _regeneratorRuntime.async(function getInitialProps$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                req = _ref.req;\n                loggedUser = true ? getUserFromLocalCookie() : getUserFromServerCookie(req);\n                pageProps = Page.getInitialProps && Page.getInitialProps(req);\n                path = req ? req.pathname : \"\";\n                path = \"\";\n                return _context.abrupt(\"return\", _objectSpread({}, pageProps, {\n                  loggedUser: loggedUser,\n                  currentUrl: path,\n                  isAuthenticated: !!loggedUser\n                }));\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n    }]);\n\n    return DefaultPage;\n  }(Component), _temp;\n});","map":null,"metadata":{},"sourceType":"module"}